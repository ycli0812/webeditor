# 说明

WebEditor中的电路用JSON表示，本文档将详细说明定义一个电路的JSON文件中的每个字段，并列出每个元件的JSON表示。

# 电路

我们用JSON Object表示电路连接，电路中包含以下两个字段

## `elementSet`

| 类型     | 是否必要 | Key    | Value    |
| -------- | -------- | ------ | -------- |
| `Object` | 是       | 元件id | 元件信息 |

元件集合，包含每个元件的信息，是元件id到元件信息集合的映射，元件信息的定义见下文。

## `config`

保留，以备日后扩展需要

# 元件

我们用一个JSON Object记录一个电路中元件的信息，所有元件都包含一些相同的字段，例如位置、类型、特性参数等。

示例：

```json
{
    type: "resistor",
    x: 0,
    y: 0,
    pins: [
        {
            name: "start",
            x: 0,
            y: 0
        },
        {
            name: "end",
            x: 0,
            y: 0
        }
    ]
    features: [
        {
            name: "resistance",
            value: "1",
            unit: "om"
        },
        {
            name: "tolerance",
            value: "1%"
        }
    ]
}
```

## 公共字段

这些字段是所有元件都包含的。

### `type`

| 类型     | 是否必要 |
| -------- | -------- |
| `String` | 是       |

元件类型，如`resistor`等。

### `x`

| 类型     | 是否必要 |
| -------- | -------- |
| `Number` | 是       |

元件位置横坐标，必须是整数。

### `y`

| 类型     | 是否必要 |
| -------- | -------- |
| `Number` | 是       |

元件位置纵坐标，必须是整数。

### `pins`

| 类型    | 是否必要 |
| ------- | -------- |
| `Array` | 是       |

引脚位置列表，列表元素定义如下：

| 字段   | 类型     | 是否必填 | 说明                                       |
| ------ | -------- | -------- | ------------------------------------------ |
| `name` | `String` | 是       | 引脚名称，同一种元件的对应引脚名称应该相同 |
| `x`    | `Number` | 是       | 引脚位置横坐标                             |
| `y`    | `Number` | 是       | 引脚位置纵坐标                             |

### `features`

| 类型    | 是否必要 |
| ------- | -------- |
| `Array` | 是       |

元件特性参数列表，列表元素定义如下：

| 字段    | 类型     | 是否必填 | 说明               |
| ------- | -------- | -------- | ------------------ |
| `name`  | `String` | 是       | 参数名称           |
| `value` | `Any`    | 是       | 值                 |
| `unit`  | `String` | 否       | 单位，可以没有单位 |

## 元件特性

这部分将介绍每个元件的特性，表格中的“特性”、“单位”分别对应上文提到的`name`和`unit`字段。

### 电阻`resistor`

| 特性         | 类型     | 单位             | 默认值 | 说明                                                         |
| ------------ | -------- | ---------------- | ------ | ------------------------------------------------------------ |
| `resistance` | `Number` | `om` `kom` `mom` | `1`    | 电阻值                                                       |
| `tolerance`  | `String` | 无               | `1%`   | 误差范围，只可选以下数值：`0.05%` `0.1%` `0.25%` `0.5%` `1%` `2%` `5%` `10%` |

### 面包板`breadboard`

| 特性       | 类型      | 单位 | 默认值  | 说明             |
| ---------- | --------- | ---- | ------- | ---------------- |
| `column`   | `Number`  | 无   | `10`    | 列数             |
| `extended` | `Boolean` | 无   | `false` | 是否启用两侧的孔 |

